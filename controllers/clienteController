const Cliente = require("../models/Cliente");


//listar todos
exports.index = async (req, res) => {

  const clientes = await Cliente.findAll()
  res.render("cliente/index", { clientes });
};


// Salvar novos

exports.save = async (req, res) => {
  
  const { nome, cpf, email } = req.body;  //pegar dados

  await Cliente.create({ nome, cpf, email}); //salvar

  res.redirect("/clientes");  //redirecionar dados
};


// formulario novo cliente  

exports.new = async (req, res) => {
  
  res.render("cliente/new");
};


//formulario ediÃ§Ã£o - edit
exports.edit = async (req, res) => {
  
  const cliente = await Cliente.findByPk(req.params.id);  //pegar dados

  res.render("cliente/edit", { cliente });
};


//Atualizar cliente 
exports.update = async (req, res) => {
  
  const { nome, cpf, email } = req.body;  //pegar dados

  await Cliente.update({ nome, cpf, email}, {

    where: { id: req.params.id}
  }); //salvar

  res.redirect("/clientes");  //redirecionar dados
};


//Deletar
exports.delete = async (req, res) => {
  
  await Cliente.destroy({where: { id: req.params.id } });  //pegar dados

  res.redirect("/clientes");  //redirecionar dados
};



